# Current vs. Target Architecture Matrix

**Purpose:** Map existing repository elements to target architecture roles  
**Methodology:** Compare current_state_map.md against target_architecture_summary.md  
**Output:** Action plan for each element (keep/move/refactor/deprecate)  

---

## Matrix Legend

**Action Codes:**
- ✅ **keep/as-is** – Already aligned with target, no changes needed
- 🔄 **move/rename** – Relocate or rename to match target structure
- ⚙️ **refactor** – Restructure contents/format to match target spec
- ⚠️ **investigate** – Unclear status, needs analysis before decision
- 🗑️ **deprecate** – Legacy component, phase out over time
- 🆕 **missing** – Required by target but doesn't exist yet

**Target Roles:**
- **Memory Bank** – Truth Layer files (Markdown/YAML)
- **Vault** – Life Graph structured data
- **Governance** – DEC, snapshots, fitness metrics
- **Observability** – Logs, events, monitoring
- **Infrastructure** – n8n, Docker, services
- **Kernel** – Claude Desktop orchestration
- **Tools/MCP** – MCP servers, integrations
- **Legacy** – Unclear fit or superseded

---

## Section 1: Truth Layer & State Management

### 1.1 Core Truth Layer Files

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `docs/system_state/SYSTEM_STATE_COMPACT.json` | file | Governance (Derived State) | ✅ keep/as-is | Auto-generated by reconciler_v1. Correctly implements Dual Truth Architecture. **Sources:** 08, 13 |
| `docs/system_state/timeline/EVENT_TIMELINE.jsonl` | file | Observability (Event Log) | ✅ keep/as-is | Append-only event log. Matches target spec. **Sources:** 08, 13 |
| `docs/system_state/registries/SERVICES_STATUS.json` | file | Observability (Service Registry) | ✅ keep/as-is | Services health tracking. Aligns with target. **Sources:** 08 |
| `EVENT_TIMELINE.jsonl` (root) | file | Legacy | 🗑️ deprecate | Duplicate of `docs/system_state/timeline/EVENT_TIMELINE.jsonl`. Remove duplicate. |
| `docs/system_state/outbox/` | dir | Observability (State Export) | ⚠️ investigate | Directory exists but appears empty. Purpose unclear. |
| `docs/system_state/agents/AGENT_CAPABILITY_PROFILE.md` | file | Governance (Template) | ✅ keep/as-is | Template for agent profiles. Useful for multi-agent coordination. |

**Key Decision:**
- Root `EVENT_TIMELINE.jsonl` is duplicate → deprecate
- All other Truth Layer files correctly placed

---

### 1.2 Governance Layer

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `governance/snapshots/GOVERNANCE_LATEST.json` | file | Governance (Truth Source) | ✅ keep/as-is | Authoritative system state. **Sources:** 08, DEC-010 |
| `governance/snapshots/SNAPSHOT_*.json` | files | Governance (Historical) | ✅ keep/as-is | Historical governance snapshots (6 files). **Sources:** DEC-010 |
| `governance/scripts/generate_snapshot.py` | file | Governance (Automation) | ✅ keep/as-is | Operational snapshot generation. **Sources:** DEC-010 |
| `governance/scripts/measure_friction.py` | file | Governance (Stub) | ⚙️ refactor | Stub → needs implementation per target FITNESS_001 spec. **Sources:** 08, governance/README.md |
| `governance/scripts/measure_cci.py` | file | Governance (Stub) | ⚙️ refactor | Stub → needs implementation per target FITNESS_002 spec. **Sources:** 08, governance/README.md |
| `governance/scripts/measure_tool_efficacy.py` | file | Governance (Stub) | ⚙️ refactor | Stub → needs implementation per target FITNESS_003 spec. **Sources:** 08, governance/README.md |
| `governance/DEC/` | dir | Governance (Decisions) | ⚠️ investigate | Only 1 file (DEC_GOVERNANCE_TRUTH_BOOTSTRAP_V1.md). Target suggests DEC files centralized in `docs/DECISIONS_AI_OS.md`. Clarify structure. |
| `governance/EVT/` | dir | Governance (Events) | ⚠️ investigate | Only 1 file (EVT_*.json). Unclear if this duplicates EVENT_TIMELINE or has different purpose. |
| `governance/metrics/` | dir | Governance (Computed Metrics) | 🆕 missing | Directory empty. Target spec suggests storing computed metrics here. Needs implementation. |

**Key Decisions:**
- Snapshot generation operational → keep
- Measurement stubs → refactor (implement per target spec)
- DEC/EVT structure unclear → investigate relationship to docs/DECISIONS_AI_OS.md

---

### 1.3 Core Documentation

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `docs/CONSTITUTION.md` | file | Governance (Policy - Static Truth) | ✅ keep/as-is | 9 foundational principles. Matches Dual Truth "Policy" layer. **Sources:** 08, 13 |
| `docs/DECISIONS_AI_OS.md` | file | Governance (Decision Log) | ✅ keep/as-is | 10 decisions (DEC-001 to DEC-010). Authoritative for decision status. **Sources:** 08, 13 |
| `docs/CAPABILITIES_MATRIX.md` | file | Governance (Capability Registry) | ✅ keep/as-is | 22 capabilities tracked. Good for tool efficacy metrics. **Sources:** README |
| `docs/SYSTEM_SNAPSHOT.md` | file | Governance (Template/Doc) | ⚠️ investigate | Appears to be template or overview doc. Relationship to SYSTEM_STATE_COMPACT unclear. |
| `docs/INFRA_MAP.md` | file | Infrastructure (Documentation) | ✅ keep/as-is | Documents services & ports. Useful reference. |

**Key Decision:**
- Core governance docs well-structured → keep as-is
- SYSTEM_SNAPSHOT.md purpose unclear → investigate

---

## Section 2: Services & MCP Servers

### 2.1 MCP Servers (Target Role: Tools/MCP)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `services/mcp_github_client/` | dir | Tools/MCP (GitHub) | ✅ keep/as-is | Operational GitHub MCP server (port 8081). Well-documented. Matches target. **Sources:** 09, 10 |
| `services/google_workspace_client/` | dir | Tools/MCP (Google) | ✅ keep/as-is | Operational Google MCP server (port 8082). READ operations. **Sources:** 09, 10 |
| `services/os_core_mcp/` | dir | Tools/MCP (State Gateway) | ✅ keep/as-is | Operational OS Core MCP (port 8083). Includes reconciler_v1. **Sources:** 08, 13 |
| `services/agent_kernel/` | dir | Kernel (LangGraph) | ✅ keep/as-is | LangGraph-based Agent Kernel (port 8084). Daily Context Sync. **Sources:** DEC-009 |

**Key Decision:**
- All 4 MCP servers operational and correctly architected → keep as-is
- Well-aligned with target Supervisor-Worker pattern

---

### 2.2 Other Services

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `services/chat1_status_updater.py` | file | Legacy | ⚠️ investigate | Chat1 status updater. Unclear if active. No documentation. |
| `services/claude_healthcheck.py` | file | Observability | ⚠️ investigate | Healthcheck script. Check if used or superseded by governance/scripts/. |

**Key Decision:**
- Status updater and healthcheck unclear → investigate usage before decision

---

## Section 3: Infrastructure

### 3.1 n8n Infrastructure

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `infra/n8n/docker-compose.yml` | file | Infrastructure (n8n) | ✅ keep/as-is | n8n Docker setup. Follows target best practices (named volumes). **Sources:** 10, DEC-006 |
| `infra/n8n/ENV_TEMPLATE.env` | file | Infrastructure (Config Template) | ✅ keep/as-is | Environment template. Good practice. |
| `infra/n8n/workflows/daily_context_sync_orchestrator_v1.json` | file | Infrastructure (Workflow) | ✅ keep/as-is | Daily Context Sync workflow. Ready for deployment. **Sources:** SLICE_DAILY_CONTEXT_SYNC_N8N_V1 |
| `infra/n8n/README.md` | file | Infrastructure (Documentation) | ✅ keep/as-is | Comprehensive n8n documentation. |

**Key Decision:**
- n8n infrastructure well-architected → keep as-is
- Matches target spec (Windows/WSL2 best practices, named volumes)

---

### 3.2 Docker Configuration

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `Dockerfile` | file | Infrastructure | ⚠️ investigate | Purpose unclear. No docker-compose.yml in root. Check if used. |
| `Dockerfile.google` | file | Infrastructure | ⚠️ investigate | Purpose unclear. Possibly for google_workspace_client? Check usage. |

**Key Decision:**
- Root-level Dockerfiles unclear → investigate before decision

---

## Section 4: claude-project Materials

### 4.1 Research Files (Target Role: Memory Bank → Archive after migration)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `claude-project/research_claude/` | dir | Memory Bank (Research - Active) | ⚙️ refactor | 29 research files. These are **source of truth** for target architecture. After migration → archive as reference. **Sources:** All research files |
| `claude-project/Knowl/` | dir | Legacy | 🗑️ deprecate | Appears to duplicate research_claude/. Remove duplicate after confirming content match. |
| `claude-project/מחסן מחקרים/` | dir | Legacy | 🗑️ deprecate | Hebrew: "Research Warehouse". Contains duplicates + conversation notes. Clean up and consolidate. |

**Key Decisions:**
- research_claude/ is authoritative → keep during migration, archive after
- Knowl/ and מחסן מחקרים/ are duplicates → deprecate
- Consolidate conversation notes if valuable

---

### 4.2 Instructions & Playbooks

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `claude-project/instructions/ai-life-os-agentic-claude-project-kernel-instructions.md` | file | Kernel (Instructions) | ✅ keep/as-is | Claude Desktop kernel instructions. Core to Chat→Spec→Change. **Sources:** 10, 11 |
| `claude-project/instructions/Claude_New_Chat_Bootstrap_EN.md` | file | Kernel (Protocol) | ✅ keep/as-is | Chat bootstrap protocol. Matches target CHAT_BOOTSTRAP_PROTOCOL_V1. **Sources:** protocols/ |
| `claude-project/ai-life-os-claude-project-playbook.md` | file | Governance (Playbook) | ✅ keep/as-is | Project playbook. Key reference document. **Sources:** Playbook itself |
| `claude-project/README_Hebrew.md` | file | Documentation | ✅ keep/as-is | Hebrew instructions. Useful for user. |

**Key Decision:**
- Instructions and playbooks well-organized → keep as-is
- Critical for kernel operation

---

### 4.3 System Mapping (NEW - Phase 0 Output)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `claude-project/system_mapping/` | dir | Governance (Migration Planning) | ✅ keep/as-is | Phase 0 output (current_state_map.md, target_architecture_summary.md, this file). **Sources:** Phase 0 instructions |
| `claude-project/system_mapping/current_state_map.md` | file | Governance (Legacy Map) | ✅ keep/as-is | Current state documentation. Archive after migration. |
| `claude-project/system_mapping/target_architecture_summary.md` | file | Governance (Target Spec) | ✅ keep/as-is | Target architecture. Reference for migration. |
| `claude-project/system_mapping/current_vs_target_matrix.md` | file | Governance (Migration Plan) | ✅ keep/as-is | This file. Migration roadmap. |

**Key Decision:**
- system_mapping/ is Phase 0 working directory → keep, archive after migration complete

---

## Section 5: Core AI Components

### 5.1 ai_core/ - ✅ **MIGRATED**

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `ai_core/` (entire directory) | dir | Legacy | ✅ **DEPRECATED** | **Archived to `archive/legacy/ai_core/` (Slice 1.2a, 2025-11-29)**. Legacy pre-MCP orchestration layer. **Sources:** INVESTIGATION_RESULTS.md |

**Migration Complete:**
- ✅ All ai_core/ archived to archive/legacy/ai_core/
- Components: action_executor.py, agent_gateway.py, agent_gateway_server.py, gpt_orchestrator.py, intent_router.py, ssot_writer.py, intents_router.md
- Evidence: Legacy pre-MCP architecture, no production imports, duplicates MCP functionality
- Impact: Demo/test scripts broken (expected, not operational)
- Slice: 1.2a (2025-11-29)

**Key Decision:**
- Legacy multi-agent infrastructure from earlier phase → deprecated and archived
- Superseded by MCP servers (GitHub, Google, OS Core, Agent Kernel)

**Research Note:**
- Target architecture emphasizes Supervisor-Worker (Claude + MCP)
- ai_core/ was earlier mesh network / complex orchestration
- Pre-MCP architecture confirmed

---

## Section 6: Agents, Workflows, Tools, Policies

### 6.1 Agents

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `agents/AGENTS_INVENTORY.md` | file | Governance (Agent Registry) | ✅ keep/as-is | Agent inventory. Useful for multi-agent coordination. **Sources:** README |
| `agents/GPT_GITHUB_AGENT.md` | file | Governance (Agent Spec) | ✅ keep/as-is | GPT GitHub Agent spec (DRY RUN). Matches target Chat→Spec→Change. **Sources:** README |

**Key Decision:**
- Agent documentation well-structured → keep as-is

---

### 6.2 Workflows

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `workflows/DECISION_LOGGING_AND_SSOT_UPDATE.md` | file | Governance (Workflow Doc) | ✅ keep/as-is | Decision logging workflow. Useful reference. |
| `workflows/GITHUB_PLANNING_DRY_RUN.md` | file | Governance (Workflow Doc) | ✅ keep/as-is | GitHub planning workflow. Core to Chat→Spec→Change. **Sources:** README |
| `workflows/IRON_TEST_WF.md` | file | Governance (Workflow Doc) | ✅ keep/as-is | Testing workflow. Useful reference. |

**Key Decision:**
- Workflow documentation well-organized → keep as-is

---

### 6.3 Tools

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|------------------|
| `tools/` (entire directory) | dir | Legacy (One-Time) | ✅ **DEPRECATED** | **Archived to `archive/one-time/tools/` (Slice 1.2b, 2025-11-29)**. One-time repo initialization utilities, no active usage. **Sources:** INVESTIGATION_RESULTS.md |

**Migration Complete:**
- ✅ All tools/ archived to archive/one-time/tools/
- Components: repo_bootstrap_agent.py, repo_introspection_agent.py, repo_reader_base.py, system_init.py, TOOLS_INVENTORY.md
- Evidence: ZERO external imports, no active references
- Impact: Zero breakage expected
- Slice: 1.2b (2025-11-29)

**Key Decision:**
- One-time utilities → deprecated and archived
- No ongoing usage → safe to archive

---

### 6.4 Policies

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `policies/HUMAN_TECH_INTERACTION_POLICY.md` | file | Governance (Policy - Static Truth) | ✅ keep/as-is | Human-tech interaction policy. Matches Dual Truth "Policy" layer. **Sources:** 13 |
| `policies/SECURITY_SECRETS_POLICY.md` | file | Governance (Policy - Static Truth) | ✅ keep/as-is | Security & secrets policy. Critical for safety. Matches target. **Sources:** 10, 13 |

**Key Decision:**
- Policies well-documented and aligned → keep as-is

---

## Section 7: Scripts & Utilities

### 7.1 Scripts Directory

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `scripts/create_pr_intent.py` | file | Tools (Automation) | ⚠️ investigate | PR intent creation. Check if used or superseded by MCP GitHub client. |
| `scripts/move_completed_plan.py` | file | Tools (Automation) | ⚠️ investigate | Plan management. Check if used. |
| `scripts/open_pr_for_branch.py` | file | Tools (Automation) | ⚠️ investigate | PR opening. Check if used or superseded. |
| `scripts/pr_worker.py` | file | Tools (Automation) | ⚠️ investigate | PR worker. Check if used. |
| `scripts/publish_slice_as_pr.py` | file | Tools (Automation) | ⚠️ investigate | Slice publishing. Check if used. |
| `scripts/validate_bootstrap_response.py` | file | Tools (Validation) | ⚠️ investigate | Bootstrap validation. Check if used. |

**Key Decision:**
- All scripts unclear → investigate usage
- May be legacy pre-MCP automation
- May still be used for specific workflows

---

### 7.2 Root-Level Scripts

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `start*.py` / `start*.bat` | files | Infrastructure (Launchers) | ⚠️ investigate | Multiple start scripts. Consolidate or clarify purpose of each. |
| `demo_loop.py`, `execute_demo.py`, `run_*.py` | files | Legacy | ⚠️ investigate | Demo/execution scripts. Check if used or legacy. |
| `test_*.py` (multiple) | files | Testing | ⚠️ investigate | Test files in root. Should move to tests/ or deprecate. |
| `check_health.py`, `setup_env.py`, `sync_api_key.py` | files | Tools | ⚠️ investigate | Utility scripts. Check usage. |

**Key Decision:**
- Many root-level scripts → investigate and consolidate
- Move tests to tests/ if active
- Deprecate demos if not used

---

## Section 8: Empty/Unclear Directories

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `maybe-relevant/` | dir | Legacy | 🗑️ deprecate | Empty directory (typo: "maybe"). Remove. |
| `mcp/` | dir | Legacy | 🗑️ deprecate | Empty directory. Remove. |
| `architecture-research/` | dir | Legacy | 🗑️ deprecate | Empty directory (Hebrew: "Architecture Research"). Remove. |
| `docs/completed_plans/` | dir | Governance (Archive) | 🆕 missing | Empty but intentional. For archiving completed plans. Keep structure. |

**Key Decision:**
- Empty legacy dirs → deprecate
- Empty intentional dirs (completed_plans/) → keep structure

---

## Section 9: Missing Components (Required by Target)

### 9.1 Memory Bank / Vault (Target Role: Life Graph)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| **NOT FOUND** | dir | Memory Bank | 🆕 missing | PARA-inspired structure (00_Inbox, 10_Projects, 20_Areas, 30_Resources, 99_Archive). **Sources:** 01, 04, 12 |
| **NOT FOUND** | dir | Vault | 🆕 missing | Life Graph entities (Area, Identity, Context, Project, Task, Log). **Sources:** 12 |

**Key Decision:**
- **CRITICAL MISSING:** Core memory structures not implemented
- Life Graph schema exists in research (file 12) but not in repo
- This is a major gap between current and target

**Action Required:**
- Create memory-bank/ directory with PARA structure
- Define schema for entities (YAML frontmatter)
- Implement or plan vector memory integration (Qdrant/LanceDB)

---

### 9.2 Circuit Breakers (Target Role: Safety)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| **NOT FOUND** | file/module | Safety (Circuit Breakers) | 🆕 missing | Loop detection, rate limiting, kill switch. **Sources:** 13 |

**Key Decision:**
- Circuit breakers defined in research but not implemented
- Safety-critical feature

**Action Required:**
- Implement circuit breaker logic (possibly in services/os_core_mcp/)
- Add to governance metrics (FITNESS_001 - friction tracking)

---

### 9.3 Observer Pattern (Target Role: Drift Detection)

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `services/os_core_mcp/reconciler.py` | file | Observability (Partial Observer) | ⚙️ refactor | reconciler_v1 exists but runs on-demand. Target suggests proactive Observer. **Sources:** 08, 13 |
| **NOT FOUND** | file | Observability (Full Observer) | 🆕 missing | Proactive drift detection (read-only probing every 10-30 min). **Sources:** 08 |

**Key Decision:**
- reconciler_v1 is reactive (on-demand)
- Target spec calls for proactive Observer (Phase 2.4)
- Current drift (Git HEAD mismatch) suggests Observer needed

**Action Required:**
- Extend reconciler or create observer.py
- Schedule via n8n (every 10-30 min)
- Write OBSERVED_STATE.json
- Generate CRs (Change Requests) for drift

---

### 9.4 Host-Agnostic Interface Layer

| Current Path | Type | Target Role | Action | Notes / Sources |
|--------------|------|-------------|--------|-----------------|
| `chat/telegram_bot.py` | file | Kernel (Host Interface - Partial) | ⚠️ investigate | Telegram bot exists but unclear if active. Target suggests multiple interfaces. **Sources:** 04, Architecting |
| **NOT FOUND** | module | Kernel (ChatGPT Interface) | 🆕 missing | ChatGPT client via OpenAI API. **Sources:** 04 |
| **NOT FOUND** | module | Kernel (Gemini Interface) | 🆕 missing | Gemini client. **Sources:** 04 |

**Key Decision:**
- Host-agnostic layer proposed in research but not implemented
- Telegram bot exists (unclear status)
- This is Phase 3+ (future)

**Action Required:**
- Investigate telegram_bot.py status
- Plan multi-interface layer (future phase)

---

## Section 10: Critical Drift Issues

### 10.1 Git HEAD vs. Truth Layer Mismatch

| Issue | Current State | Target State | Action | Notes / Sources |
|-------|---------------|--------------|--------|-----------------|
| Git HEAD mismatch | Truth Layer reports `43b308a` but actual HEAD is `41581fae...` | Truth Layer should auto-update from Observer | ⚙️ refactor | Implement proactive Observer to detect and report this drift. **Sources:** 08, 13 |

**Key Decision:**
- This is the exact drift problem documented in research
- reconciler_v1 exists but didn't catch this
- Observer (Phase 2.4) is the solution

---

### 10.2 Duplicate Event Timelines

| Issue | Current State | Target State | Action | Notes / Sources |
|-------|---------------|--------------|--------|-----------------|
| Two EVENT_TIMELINE.jsonl files | Root and docs/system_state/timeline/ | Single append-only log | 🔄 move/rename | Remove root duplicate, use only docs/system_state/timeline/EVENT_TIMELINE.jsonl. Update any scripts that reference root file. **Sources:** 08 |

---

## Summary: Action Categories

### ✅ Keep As-Is (Well-Aligned)

**Count:** ~40 items

**Categories:**
- Truth Layer files (SYSTEM_STATE_COMPACT, EVENT_TIMELINE, SERVICES_STATUS)
- Governance snapshots and snapshot generation
- All 4 MCP servers (GitHub, Google, OS Core, Agent Kernel)
- n8n infrastructure
- Core documentation (CONSTITUTION, DECISIONS, CAPABILITIES_MATRIX)
- Policies (Security, Human-Tech Interaction)
- Instructions & playbooks (kernel instructions, chat bootstrap)
- Agent & workflow documentation

**Justification:** These components already implement target architecture correctly.

---

### ⚠️ Investigate (Unclear Status)

**Count:** ~25 items

**Categories:**
- ai_core/ components (action_executor, agent_gateway, gpt_orchestrator, etc.)
- tools/ Python scripts (repo_bootstrap, repo_introspection, etc.)
- scripts/ automation (PR workers, slice publishers, etc.)
- Root-level scripts (start*.py, demo*.py, test*.py, etc.)
- services/ utilities (chat1_status_updater, claude_healthcheck)
- Docker files (root Dockerfile, Dockerfile.google)
- Directories (docs/system_state/outbox/, governance/DEC/, governance/EVT/)

**Justification:** Status unclear – need to determine if active, legacy, or superseded.

**Investigation Plan:**
1. Check imports/dependencies (what imports ai_core/?)
2. Check git history (last modified when?)
3. Check documentation (referenced where?)
4. Test execution (do they run?)
5. Decision: keep/refactor/deprecate based on findings

---

### 🔄 Move/Rename (Misplaced)

**Count:** ~3 items

**Items:**
- `EVENT_TIMELINE.jsonl` (root) → remove (duplicate)
- Possibly some test_*.py files → move to tests/

**Justification:** Duplicates or misplaced files.

---

### ⚙️ Refactor (Needs Implementation/Update)

**Count:** ~5 items

**Items:**
- `governance/scripts/measure_friction.py` (stub → implement)
- `governance/scripts/measure_cci.py` (stub → implement)
- `governance/scripts/measure_tool_efficacy.py` (stub → implement)
- `services/os_core_mcp/reconciler.py` (reactive → proactive Observer)
- `claude-project/research_claude/` (active → archive after migration)

**Justification:** Partial implementation or needs evolution per target spec.

---

### 🗑️ Deprecate (Legacy/Duplicate)

**Count:** ~6 items

**Items:**
- `claude-project/Knowl/` (duplicate of research_claude/)
- `claude-project/מחסן מחקרים/` (duplicate research warehouse)
- `maybe-relevant/`, `mcp/`, `architecture-research/` (empty legacy dirs)
- Potentially ai_core/ if superseded (pending investigation)

**Justification:** Duplicates, empty directories, or superseded by MCP architecture.

---

### 🆕 Missing (Required by Target)

**Count:** ~6 major gaps

**Critical Missing:**
1. **Memory Bank** (PARA structure: 00_Inbox, 10_Projects, 20_Areas, etc.)
2. **Vault** (Life Graph entities with YAML frontmatter)
3. **Vector Memory** (Qdrant/LanceDB integration)
4. **Circuit Breakers** (loop detection, rate limiting, kill switch)
5. **Proactive Observer** (drift detection every 10-30 min)
6. **Host-Agnostic Interface Layer** (ChatGPT/Gemini clients)

**Justification:** Target architecture requires these, but they don't exist yet.

---

## Migration Priorities (Preview of Step 4)

Based on this matrix, migration should prioritize:

**Phase 1: Foundation & Cleanup**
1. **Investigate Unclear Components** (ai_core/, scripts/, tools/)
2. **Remove Duplicates** (EVENT_TIMELINE root, Knowl/, מחסן מחקרים/)
3. **Consolidate Scripts** (clarify start*.py, test*.py, demo*.py)

**Phase 2: Core Memory (Critical Gap)**
4. **Create Memory Bank Structure** (PARA folders)
5. **Define Life Graph Schema** (YAML templates)
6. **Plan Vector Memory** (Qdrant/LanceDB)

**Phase 3: Observability & Safety**
7. **Implement Circuit Breakers** (safety-critical)
8. **Build Proactive Observer** (drift detection)
9. **Implement Measurement Scripts** (FITNESS_001, _002, _003)

**Phase 4: Future Features**
10. **Host-Agnostic Interfaces** (multi-client support)
11. **Advanced Automations** (n8n workflows)

---

## Open Questions for Migration Planning

1. **ai_core/ Status:**
   - Is this pre-MCP architecture?
   - Which components (if any) are still used?
   - Can we safely deprecate or do we need migration?

2. **DEC/EVT Structure:**
   - Why only 1 file each in governance/DEC/ and governance/EVT/?
   - Is docs/DECISIONS_AI_OS.md the authoritative decision log?
   - Should governance/DEC/ be deprecated or expanded?

3. **Memory Bank Priority:**
   - Can Phase 0 → Phase 1 migration happen without Memory Bank?
   - Or is Memory Bank foundational and should be created first?

4. **Observer Timing:**
   - Should Observer (Phase 2.4 in current plan) be earlier?
   - Current drift suggests Observer is critical

5. **Testing Strategy:**
   - Many test_*.py files in root
   - Should these move to tests/ or are they demos?
   - What's the relationship to test/bootstrap_responses/?

---

## Next Steps

**After approval of this matrix:**

📋 **Step 4: migration_plan.md**

The migration plan will:
- Organize matrix items into phases and slices
- Prioritize based on risk, dependencies, and value
- Define clear success criteria for each slice
- Specify which research docs justify each slice

**Awaiting approval to proceed to Step 4.**

---

**Document Version:** 1.0  
**Created:** 2025-11-29  
**By:** Claude Desktop (Phase 0, Step 3)  
**Sources:** current_state_map.md + target_architecture_summary.md  
**Matrix Size:** ~90 items mapped  
**Confidence:** High (fact-based, uncertainties explicitly flagged)