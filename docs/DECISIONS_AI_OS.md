# AI-OS – החלטות ליבה (Core Decisions)

**מטרת המסמך**: תיעוד החלטות אסטרטגיות וארכיטקטוניות במערכת AI-OS.

**פורמט**: כל החלטה מתועדת עם תאריך, הקשר, החלטה ורציונל.

---

## 2025-11-20 – החלטה #1: MCP Orchestration

### הקשר
מערכת ה-MCP (Master Control Program) בריפו הישן `make-ops-clean` היא מערכת מורכבת לניהול סוכנים, תזמון ואינטגרציות. היא כוללת:
- `mcp/server/` - שרת מרכזי
- `mcp/clients/` - לקוחות (web, iOS shortcuts)
- `mcp/github/` - אינטגרציית GitHub
- `mcp/google/` - אינטגרציית Google

**שאלה**: האם לייבא את MCP כקוד רץ ל-AI-OS?

### ההחלטה
**MCP לא נלקח כקוד רץ ל-AI-OS.**

- **סטטוס**: 🗄️ Legacy / Reference Only
- **שימוש**: משמש כמקור עיצוב וידע בלבד
- **אין**: פריסה, הפעלה, או שימוש אקטיבי בקוד

### רציונל

**למה לא לייבא?**
1. **מורכבות גבוהה**: MCP התפתח אורגנית ויש בו רבדים רבים שלא לגמרי מתועדים.
2. **תלות בתשתית**: הוא נבנה סביב תשתית ספציפית (Cloud Run, Workflows) שלא בהכרח נחוצה ב-AI-OS.
3. **עקרון Data-First**: AI-OS נבנה מאפס עם עקרונות נקיים. עדיף לבנות תשתית פשוטה ומסודרת.

**מה כן לוקחים?**
- **תובנות עיצוב**: איך MCP פתר בעיות של תזמון, אינטגרציות, וניהול סוכנים.
- **דפוסי עבודה**: מה עבד טוב, מה לא.
- **מסמכי תיעוד**: כולם עברו לריפו כחומר עיון.

**מה במקום?**
- בעתיד, אם נזדקק למנגנון orchestration - נבנה אחד פשוט ומודולרי מאפס.
- כרגע: אין צורך במנגנון מרכזי. הסוכנים פועלים בנפרד.

### השפעה על CAPABILITIES_MATRIX
- **MCP-001**: MCP Orchestration → 🗄️ Legacy (Reference Only)
- **MCP-002**: MCP GitHub Integration → 🗄️ Legacy (Reference Only)
- **MCP-003**: MCP Google Integration → 🗄️ Legacy (Reference Only)

---

## 2025-11-20 – החלטה #2: GitHub Executor API

### הקשר
בריפו הישן קיים קוד מלא של `github-executor-api` - שירות Cloud Run שמספק API לאוטומציה של GitHub. הקוד:
- ממוקם ב-`cloud-run/google-workspace-github-api/`
- מכיל 2 endpoints: health check + update file
- מתוכנן ל-deployment ב-Cloud Run
- **בעיה**: Deployment חסום (חסר GitHub PAT, בעיות config)

**שאלה**: האם לפרוס את הקוד הקיים ב-AI-OS?

### ההחלטה
**הקוד הקיים לא נפרס ולא מופעל.**

- **סטטוס**: 📋 Designed (Not Deployed)
- **שימוש**: משמש כ-Blueprint / Design Reference בלבד
- **אין**: פריסה, הפעלה, או ניסיון לתקן את הקוד הקיים

### רציונל

**למה לא לפרוס?**
1. **תוכנן למערכת אחרת**: הקוד נבנה עבור `make-ops-clean` עם דרישות ספציפיות.
2. **בעיות deployment לא פתורות**: חסר PAT, יש באגים (typo ב-Accept header), לא ברור מה הסטטוס.
3. **בטיחות**: אין לנו שכבות פיקוח ואבטחה מספיקות להפעלת Executor אוטומטי.
4. **עקרון Thin Slices**: עדיף לבנות אוטומציה הדרגתית ומבוקרת.

**מה כן לוקחים?**
- **העיצוב**: איך הוא חשב על endpoints, authentication, path validation.
- **הלקחים**: מה הבעיות שהוא ניסה לפתור.
- **ה-Blueprint**: אם בעתיד נחליט לבנות Executor - נשתמש בו כנקודת התחלה.

**מה במקום?**
- כרגע: **אין אוטומציה של כתיבה ל-GitHub**.
- בעתיד: אם נצטרך Executor - נבנה אחד מאפס, עם שכבות בטיחות ברורות.

### השפעה על CAPABILITIES_MATRIX
- **GH-005**: GitHub Executor API → 📋 Designed (Not Deployed) - Reference Only

---

## 2025-11-20 – החלטה #3: GPT GitHub Agent – Execution Mode

### הקשר
הסוכן **GPT GitHub Agent** (`gpt_agent/github_agent.py`) הוא הסוכן המתוחכם ביותר שזוהה בריפו הישן. הוא:
- מנתח Intent של המשתמש
- קורא מסמכי SSOT (CAPABILITIES_MATRIX, DESIGN, SNAPSHOT)
- מסווג פעולות ל-OS_SAFE / CLOUD_OPS_HIGH
- מחזיר תוכנית מפורטת

**כרגע**: הסוכן פועל במצב **DRY RUN** - מתכנן אבל לא מבצע.

**שאלה**: האם לשדרג את הסוכן למצב Executor (מבצע פעולות)?

### ההחלטה
**הסוכן נשאר במצב DRY RUN בלבד.**

- **סטטוס**: 🚧 Operational (Limited) - DRY RUN ONLY
- **תפקיד**: Planner בלבד - מנתח, מתכנן, מציע
- **אין**: פעולות כתיבה אוטומטיות על GitHub

### רציונל

**למה DRY RUN?**
1. **בטיחות מעל הכל**: צריך לבנות אמון הדרגתי במערכת.
2. **Human-in-the-loop חובה**: כל פעולת כתיבה צריכה אישור אנושי מפורש.
3. **בדיקת יכולות**: DRY RUN מאפשר לבדוק את הסוכן בלי סיכון.
4. **עקרון Data-First**: קודם מגדירים חוקים, מדיניות ובקרות - אחר כך מפעילים אוטומציות.

**מה הסוכן כן עושה?**
- קורא את מצב המערכת (CAPABILITIES_MATRIX, SYSTEM_SNAPSHOT)
- מנתח בקשות ומסווג רמת סיכון
- מחזיר תוכנית מפורטת עם צעדים
- מסביר למה כל צעד נחוץ

**מה הסוכן לא עושה?**
- ❌ לא כותב קבצים ב-GitHub
- ❌ לא יוצר commits
- ❌ לא פותח PRs
- ❌ לא מפעיל workflows

**Roadmap עתידי**:
- **שלב 1** (נוכחי): DRY RUN בלבד
- **שלב 2** (אפשרי בעתיד): Executor מוגבל ל-OS_SAFE בלבד (Docs/State)
- **שלב 3** (רחוק): Executor מלא עם אישור אנושי ל-CLOUD_OPS_HIGH

**תנאים לשלב 2**:
1. שכבות אבטחה מוגדרות בבירור
2. מנגנון rollback אוטומטי
3. פיקוח ומוניטורינג מלא
4. בדיקות מקיפות של הסוכן
5. אישור אנושי מפורש מהמשתמש (אור)

### השפעה על CAPABILITIES_MATRIX
- **GH-002**: GitHub Planning (DRY RUN) → 🚧 Operational (Limited) - **DECISION 2025-11-20**: Planner בלבד, אין כתיבה אוטומטית

### השפעה על GPT_GITHUB_AGENT.md
- יתווסף ציון מפורש: **"הסוכן פועל במצב Planner בלבד (DRY RUN)"**
- יתווסף אזהרה: **"אין פעולות כתיבה אוטומטיות - כל פעולה דורשת אישור וביצוע ידני"**

---

## סיכום ההחלטות

| # | נושא | החלטה | סטטוס |
|---|------|-------|-------|
| **1** | MCP Orchestration | לא נלקח כקוד רץ | 🗄️ Legacy (Reference Only) |
| **2** | GitHub Executor API | לא פרוס | 📋 Designed (Not Deployed) |
| **3** | GPT GitHub Agent Mode | DRY RUN בלבד | 🚧 Operational (Limited) |

---

## עקרונות מנחים

ההחלטות האלה משקפות את **חוקי היסוד של AI-OS**:

1. **Data-First** (חוק #1): קודם מגדירים, אחר כך בונים
2. **Human-in-the-loop** (חוק #4): אין פעולות הרסניות בלי אישור
3. **Thin Slices** (חוק #6): בונים בצורה הדרגתית ומבוקרת
4. **אבטחה מעל הכל** (חוק #7): בטיחות תמיד במקום הראשון

---

**סטטוס מסמך זה**: ✅ Active  
**עדכון אחרון**: 20 נובמבר 2025  
**החלטות נעולות**: 3 החלטות קריטיות  
**הערה**: החלטות אלה ניתנות לשינוי בעתיד, אבל רק אחרי דיון מפורש ותיעוד של הרציונל לשינוי.
