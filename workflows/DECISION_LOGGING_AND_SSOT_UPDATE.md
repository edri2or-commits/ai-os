# Workflow: Decision Logging & SSOT Update (WF-002)

**Workflow ID**: WF-002  
**גרסה**: 1.0  
**תאריך יצירה**: 20 נובמבר 2025  
**סטטוס**: ✅ Active

---

## מטרה

לוודא שכל החלטה חשובה במערכת:
- ✅ **מתועדת** בצורה מסודרת ב-`DECISIONS_AI_OS.md`
- ✅ **משתקפת** במסמכי ה-SSOT הרלוונטיים
- ✅ **לא נשארת** רק בתוך צ'אט חד-פעמי
- ✅ **עקבית** בין כל המסמכים

**למה זה חשוב?**
- **זיכרון מתמיד**: החלטות לא נשכחות
- **סנכרון**: כל המסמכים משקפים את המציאות
- **אחריותיות**: ברור מתי ולמה הוחלט
- **מניעת סתירות**: הכל עקבי

---

## מתי משתמשים ב-Workflow הזה

### **תמיד משתמשים כש**:

1. **מחליטים על סטטוס רכיב מרכזי**:
   - סוכן: "GPT Agent יהיה DRY RUN בלבד"
   - כלי: "MCP לא רץ במערכת"
   - API: "GitHub Executor לא פרוס"

2. **משנים יכולת במערכת**:
   - הוספת יכולת חדשה
   - הסרת יכולת
   - שינוי סטטוס (Active → Legacy)

3. **מגדירים מדיניות/גבולות**:
   - כללי אבטחה
   - הרשאות סוכנים
   - גבולות גזרה (boundaries)

4. **מחליטים על ארכיטקטורה**:
   - מבנה תיקיות
   - עקרונות תכנון
   - workflow patterns

### **אפשר לדלג כש**:

- שינויים קטנים בתיעוד (typos, formatting)
- עדכוני routine (עדכון תאריכים, גרסאות)
- דברים שכבר מתועדים היטב

**כלל אצבע**: אם התשובה ל"האם זה ישנה איך המערכת פועלת?" היא כן - צריך workflow.

---

## שחקנים (Actors)

| שחקן | תפקיד | אחריות |
|------|-------|---------|
| **אור (Human)** | מקבל החלטות | מחליט, מאשר, מוודא עקביות |
| **GPT / Claude** | עוזרים | ניסוח, סינכרון, בדיקה צולבת |
| **DECISIONS_AI_OS.md** | לוג | רישום כל ההחלטות |
| **SSOT Docs** | מסמכי אמת | SNAPSHOT, MATRIX, README וכו' |

---

## שלבי העבודה (Workflow Steps)

### **שלב 1: ניסוח ההחלטה (Decision Formulation)**

**מבצע**: אור (Human)

**פעולות**:

אור מנסח את ההחלטה בצורה מובנית:

1. **Context (הקשר)**:
   - מה המצב הנוכחי?
   - מה הבעיה/שאלה?
   - מה האלטרנטיבות?

2. **Decision (ההחלטה)**:
   - מה הוחלט?
   - מה הסטטוס?
   - מה לא יקרה?

3. **Rationale (רציונל)**:
   - למה זו החלטה הטובה?
   - מה השיקולים?
   - מה היתרונות/חסרונות?

4. **Impact (השפעה)**:
   - על מה זה משפיע?
   - אילו מסמכים צריך לעדכן?
   - מה צריך לעשות אחר כך?

**דוגמה**:
```
Context: יש לנו קוד של MCP מהריפו הישן. צריך להחליט אם להריץ אותו.
Decision: MCP לא רץ כקוד. משמש רק כ-Reference.
Rationale: מורכב מדי, תלות בתשתית, עדיף לבנות מאפס.
Impact: CAPABILITIES_MATRIX, SYSTEM_SNAPSHOT צריכים עדכון.
```

**פלט**: החלטה מנוסחת בצורה ברורה

---

### **שלב 2: יצירת רשומת החלטה (Decision Record Creation)**

**מבצע**: GPT / Claude (עם אישור אור)

**פעולות**:

יצירת בלוק Markdown מובנה:

```markdown
## YYYY-MM-DD – החלטה #X: [שם ההחלטה]

### הקשר
[תיאור המצב, הבעיה, השאלה]

**שאלה**: [השאלה המרכזית]

### ההחלטה
**[תיאור קצר של ההחלטה]**

- **סטטוס**: [Active / Legacy / Designed / Planned]
- **שימוש**: [איך משתמשים / לא משתמשים]
- **אין**: [מה לא יקרה]

### רציונל

**למה?**
1. [סיבה 1]
2. [סיבה 2]
3. [סיבה 3]

**מה כן?**
- [מה נשאר/נלקח]

**מה במקום?**
- [אלטרנטיבה/תוכנית עתידית]

### השפעה על SSOT

**מסמכים לעדכן**:
- `CAPABILITIES_MATRIX.md`: [מה לשנות]
- `SYSTEM_SNAPSHOT.md`: [מה לשנות]
- `README.md`: [אם רלוונטי]
- `[אחרים]`: [לפי הצורך]

**Follow-ups**:
- [ ] [משימה 1]
- [ ] [משימה 2]
```

**מיקום**: הבלוק נכנס ל-`docs/DECISIONS_AI_OS.md`

**פלט**: רשומת החלטה מובנית

---

### **שלב 3: זיהוי SSOT מושפע (Impact Analysis)**

**מבצע**: GPT / Claude

**פעולות**:

בדיקה שיטתית של כל מסמך SSOT:

#### **בודקים**:

1. **CAPABILITIES_MATRIX.md**:
   - האם יכולת השתנתה?
   - האם סטטוס השתנה?
   - האם צריך להוסיף הערה ב-Notes?

2. **SYSTEM_SNAPSHOT.md**:
   - האם המצב הנוכחי השתנה?
   - האם צריך לעדכן סעיף "הושלם"/"בתהליך"?
   - האם יש משימה חדשה לרשימה?

3. **README.md**:
   - האם התיאור הכללי השתנה?
   - האם צריך לעדכן דוגמאות?
   - האם Roadmap השתנה?

4. **מסמכים אחרים**:
   - `AGENTS_INVENTORY.md` - אם זה על סוכן
   - `TOOLS_INVENTORY.md` - אם זה על כלי
   - `SECURITY_SECRETS_POLICY.md` - אם זה על אבטחה
   - מסמכי workflow - אם זה משנה תהליך

**יוצרים רשימה**:
```markdown
## SSOT Updates Required:

1. CAPABILITIES_MATRIX.md:
   - שורה X: שנה סטטוס מ-Y ל-Z
   - הוסף Note: "DECISION 2025-11-20"

2. SYSTEM_SNAPSHOT.md:
   - סעיף "כלים": עדכן תיאור
   - סעיף "הושלם": הוסף החלטה

3. README.md:
   - לא דורש עדכון
```

**פלט**: רשימת עדכונים נדרשת

---

### **שלב 4: עדכון מסמכי SSOT (SSOT Update Execution)**

**מבצע**: אור + Claude

**פעולות**:

עבור כל מסמך ברשימה:

#### **תהליך לכל מסמך**:

1. **תכנון**:
   ```
   מסמך: CAPABILITIES_MATRIX.md
   מיקום: שורה 45, יכולת MCP-001
   שינוי: Status → 🗄️ Legacy (Reference Only)
   הוספה: Note: DECISION 2025-11-20
   ```

2. **ביצוע**:
   - Claude עורך את הקובץ
   - משנה רק מה שצריך
   - שומר עקביות פורמט

3. **בדיקה**:
   - אור קורא את השינוי
   - מוודא שזה נכון
   - מאשר

4. **חזרה** על תהליך למסמך הבא

**עקרונות**:
- ✅ שפה עקבית בין מסמכים
- ✅ פורמט אחיד
- ✅ תאריכים מסונכרנים
- ✅ קישורים תקינים

**פלט**: מסמכי SSOT מעודכנים

---

### **שלב 5: בדיקה צולבת (Cross-Check Validation)**

**מבצע**: GPT / Claude (עם אישור אור)

**פעולות**:

#### **בדיקות**:

1. **עקביות בין מסמכים**:
   - CAPABILITIES_MATRIX אומר X
   - SYSTEM_SNAPSHOT אומר X
   - README אומר X
   - **אין סתירות** ✅

2. **עקביות טרמינולוגיה**:
   - שימוש באותם מונחים
   - אותו סטייל כתיבה
   - אותה רמת פירוט

3. **שלמות**:
   - כל ההשלכות מכוסות
   - אין "חורים" במידע
   - הכל מתועד

4. **גרסאות**:
   - אם שינוי משמעותי → עדכן גרסה
   - תאריך עדכון אחרון
   - commit messages ברורים

**אם נמצא פער**:
```
Problem: SNAPSHOT אומר "10 כלים" אבל INVENTORY אומר "24 כלים"
Action: עדכן SNAPSHOT או הוסף הערה ב-DECISIONS
```

**פלט**: אישור שהכל עקבי

---

### **שלב 6: תיוג והמשך (Tagging & Follow-up)**

**מבצע**: אור + Claude

**פעולות**:

#### **עדכון רשומת ההחלטה**:

```markdown
### השפעה על SSOT

**מסמכים שעודכנו** ✅:
- CAPABILITIES_MATRIX.md (v1.1 → v1.2)
- SYSTEM_SNAPSHOT.md (v2.0 → v2.1)
- [commit: abc123]

**Follow-ups**:
- [ ] לבדוק אם צריך לעדכן גם TOOLS_INVENTORY
- [ ] לשקול הוספת דוגמה ב-README
- [x] עדכון SSOT הושלם ✅
```

#### **עדכון SYSTEM_SNAPSHOT** (אם רלוונטי):

```markdown
## 8. איפה אנחנו עכשיו

✔ נעשה החלטה #4: [שם]
⏳ בשלב הבא: [מה נובע מהחלטה]
```

#### **Commit המסודר**:

```bash
git add docs/DECISIONS_AI_OS.md
git add docs/CAPABILITIES_MATRIX.md
git add docs/SYSTEM_SNAPSHOT.md

git commit -m "Decision #4: [שם ההחלטה] + SSOT sync"
git push
```

**פלט**: החלטה מתועדת לחלוטין + SSOT מסונכרן

---

## Safety & Boundaries

### 🔒 **כללי בטיחות**:

1. **החלטות לגבי סיקרטים/אבטחה**:
   - חייבות לעמוד ב-`SECURITY_SECRETS_POLICY.md`
   - כל שינוי במדיניות אבטחה = החלטה חדשה
   - תיעוד מלא של השפעות

2. **לא מוחקים החלטות ישנות**:
   - רק מוסיפים החלטות חדשות
   - אם החלטה משתנה → החלטה #X: "עדכון החלטה #Y"
   - שומרים היסטוריה מלאה

3. **החלטות על קוד רץ/הרשאות**:
   - חייב לציין: "דורש אישור מפורש לפני שינוי"
   - לא מבצעים שינויי קוד אוטומטית
   - Human-in-the-loop חובה

4. **החלטות על workflows**:
   - משפיעות על איך המערכת עובדת
   - דורשות תיעוד מיוחד
   - בדיקה שהם לא סותרים workflows קיימים

---

## דוגמאות (Examples)

### **דוגמה 1: החלטה על סוכן (כמו שכבר יש)**

**Context**: יש לנו GPT GitHub Agent. צריך להחליט אם הוא מבצע אוטומטית.

**Decision**: הסוכן פועל במצב DRY RUN בלבד.

**Rationale**: בטיחות, בניית אמון הדרגתי.

**Impact**:
- CAPABILITIES_MATRIX: GH-002 → 🚧 Operational (Limited)
- SYSTEM_SNAPSHOT: הוסף לסעיף "סוכנים"
- README: הסבר DRY RUN mode

**Result**: החלטה #3 ב-DECISIONS_AI_OS.md

---

### **דוגמה 2: החלטה עתידית על Executor**

**Scenario**: אחרי 100+ הפעלות מוצלחות של DRY RUN.

**Context**:
```
המערכת רצה 150 פעמים במצב DRY RUN.
אחוז הצלחה: 96%.
לא היו incidents.
רוצים לשדרג ל-Semi-Automated.
```

**Decision**:
```
GPT GitHub Agent מקבל יכולת ליצור טיוטות PR.
הטיוטה לא מתפרסמת אוטומטית.
אור חייב לאשר כל PR לפני פרסום.
```

**Rationale**:
```
1. הוכח יציבות
2. חוסך זמן
3. עדיין שומר בקרה אנושית
```

**Impact**:
```
CAPABILITIES_MATRIX:
- GH-002: Status → 🚧 Operational (Semi-Automated)
- הוסף Note: "DECISION 2025-12-XX"

GPT_GITHUB_AGENT.md:
- עדכן "Execution Mode"
- הוסף "PR Draft Creation" ליכולות

SYSTEM_SNAPSHOT:
- עדכן "סוכנים" + "Roadmap"

README:
- עדכן דיאגרמה
- הוסף דוגמה של Semi-Automated
```

---

### **דוגמה 3: החלטה על סיום שימוש בכלי**

**Context**:
```
מצאנו התייחסות ל-Make.com.
לא ברור אם בשימוש.
אחרי בדיקה: לא בשימוש כבר 6 חודשים.
```

**Decision**:
```
Make.com לא בשימוש במערכת.
מסירים מכלים Active.
מעבירים ל-Legacy / Archive.
```

**Rationale**:
```
1. לא בשימוש
2. מבלבל את התיעוד
3. מפחית surface area לאבטחה
```

**Impact**:
```
TOOLS_INVENTORY:
- Make.com: Status → 🗄️ Legacy
- הוסף Note: "Not in use since [date]"

SYSTEM_SNAPSHOT:
- מספר כלים פעילים: 10 → 9

CAPABILITIES_MATRIX:
- אין שינוי (לא היה capability)
```

---

## Failure Modes & Recovery

### **כשל אפשרי #1: שכחנו לעדכן מסמך**

**תסמינים**:
- DECISIONS אומר X
- SNAPSHOT אומר Y
- סתירה!

**פתרון**:
1. זיהוי המסמך החסר
2. עדכון מיידי
3. הוספת הערה ב-DECISIONS:
   ```markdown
   **Update 2025-11-21**: תוקן גם SNAPSHOT
   ```

---

### **כשל אפשרי #2: החלטה לא ברורה**

**תסמינים**:
- קשה להבין מה בדיוק הוחלט
- לא ברור מה ההשפעה
- משתמשים מבולבלים

**פתרון**:
1. אור כותב הבהרה
2. מוסיפים סעיף "Clarification" להחלטה
3. מעדכנים SSOT בהתאם

---

### **כשל אפשרי #3: שינוי החלטה לאחר זמן**

**תסמינים**:
- החלטה #X כבר לא רלוונטית
- צריך להחליף

**פתרון**:
1. **לא מוחקים** את החלטה #X
2. יוצרים החלטה חדשה: 
   ```markdown
   ## YYYY-MM-DD – החלטה #Y: עדכון החלטה #X
   
   ### הקשר
   החלטה #X מתאריך [DATE] קבעה ש-[...].
   כעת, אחרי [REASON], אנחנו משנים.
   
   ### ההחלטה החדשה
   [...]
   
   ### מה משתנה מהחלטה #X
   - [...]
   ```
3. מעדכנים SSOT לפי החלטה החדשה

---

## Integration with Other Workflows

### **שילוב עם WF-001 (GITHUB_PLANNING_DRY_RUN)**:

```
צעד 1-6 של WF-001 → תוכנית מוכנה
צעד 7: תיעוד

אם השינוי מהותי:
  → הפעל WF-002 (Decision Logging)
  → תעד החלטה
  → סנכרן SSOT

אם השינוי routine:
  → רק עדכון SNAPSHOT (אם בכלל)
```

**דוגמה**:
```
WF-001: תכננו להוסיף workflow חדש
→ זה decision: "מוסיפים WF-003"
→ הפעל WF-002:
  - רשום החלטה
  - עדכן SNAPSHOT
  - עדכן README
```

---

### **שילוב עם Security Policy**:

```
החלטה על סיקרטים/אבטחה:
  → חובה להתייחס ל-SECURITY_SECRETS_POLICY
  → בדוק שהחלטה לא סותרת מדיניות
  → אם משנה מדיניות → עדכן גם אותה
  → תעד ב-DECISIONS + ב-Policy
```

---

## Metrics & Success Criteria

### **קריטריונים להצלחה**:

1. ✅ **כל החלטה מתועדת תוך 24 שעות**
2. ✅ **אפס סתירות בין מסמכים**
3. ✅ **כל השינויים בSSot מתייחסים להחלטה**
4. ✅ **אפשר למצוא החלטה תוך < 2 דקות**
5. ✅ **ברור למי/מה זה משפיע**

---

### **KPIs**:

| Metric | Target | How to Measure |
|--------|--------|----------------|
| **Decision Documentation Time** | < 24h | מתי הוחלט → מתי נרשם |
| **SSOT Sync Accuracy** | 100% | אין סתירות |
| **Follow-up Completion** | > 90% | TODOs הושלמו |
| **Decision Clarity** | 9/10 | אפשר להבין ב-reading אחד |

---

## Roadmap

### **שלב 1: ידני** (נוכחי) ✅

**מה יש**:
- Workflow מוגדר
- תבנית ברורה
- תהליך צעד-אחר-צעד

**מה חסר**:
- אוטומציה
- בדיקות אוטומטיות
- תזכורות

---

### **שלב 2: עזרה חכמה** (עתיד קרוב) 🔄

**מה נוסיף**:
- **Decision Assistant**: סוכן ייעודי שעוזר
  - מזהה אוטומטית מתי צריך decision
  - מציע רשימת SSOT לעדכן
  - בודק עקביות

**דוגמה**:
```
אור: "החלטנו ש-MCP לא רץ"
Assistant: "זיהיתי החלטה חדשה. האם לפתוח decision record?"
אור: "כן"
Assistant: "הנה טיוטה. צריך לעדכן:
  - CAPABILITIES_MATRIX
  - SYSTEM_SNAPSHOT
  - README (optional)
האם לבצע?"
```

---

### **שלב 3: חיבור אוטומטי** (עתיד רחוק) 🔮

**מה נוסיף**:
- **Auto-sync**: עדכונים אוטומטיים (תחת פיקוח)
  - Decision → SSOT sync אוטומטי
  - בדיקות אוטומטיות
  - הצעות commits

**תנאים**:
1. שלב 2 פועל מעולה
2. 50+ decisions מתועדות
3. אפס טעויות סנכרון ידני
4. אישור מפורש מאור

---

## Templates

### **תבנית החלטה מלאה**:

```markdown
## YYYY-MM-DD – החלטה #X: [שם ההחלטה הקצר]

### הקשר
[תיאור המצב הנוכחי]
- [נקודה 1]
- [נקודה 2]

**שאלה**: [השאלה המרכזית שהוחלט עליה]

### ההחלטה
**[תיאור ההחלטה בקצרה - 1-2 משפטים]**

- **סטטוס**: [Active / Legacy / Designed / Planned / Blocked]
- **שימוש**: [איך/למה משתמשים או לא]
- **אין**: [מה בפירוש לא יקרה]

### רציונל

**למה החלטה זו?**
1. [סיבה ראשית]
2. [סיבה משנית]
3. [סיבה נוספת]

**מה היתרונות?**
- [יתרון 1]
- [יתרון 2]

**מה החסרונות?**
- [חיסרון 1]
- [איך מתמודדים איתו]

**מה כן לוקחים/שומרים?**
- [אם רלוונטי]

**מה במקום?**
- [אלטרנטיבה או תוכנית עתידית]

### השפעה על SSOT

**מסמכים שעודכנו** ✅:
- `[file].md`: [מה שונה]
- `[file].md`: [מה שונה]

**Follow-ups**:
- [ ] [משימה 1]
- [ ] [משימה 2]
- [x] [משימה שהושלמה]

**Commits**:
- [commit hash]: "[commit message]"

---
```

---

## קישורים למסמכים רלוונטיים

- [`docs/CONSTITUTION.md`](../docs/CONSTITUTION.md) - חוקי יסוד
- [`docs/DECISIONS_AI_OS.md`](../docs/DECISIONS_AI_OS.md) - לוג החלטות
- [`docs/SYSTEM_SNAPSHOT.md`](../docs/SYSTEM_SNAPSHOT.md) - מצב נוכחי
- [`docs/CAPABILITIES_MATRIX.md`](../docs/CAPABILITIES_MATRIX.md) - מפת יכולות
- [`workflows/GITHUB_PLANNING_DRY_RUN.md`](./GITHUB_PLANNING_DRY_RUN.md) - WF-001

---

**סטטוס Workflow זה**: ✅ Active & Ready  
**נוצר**: 20 נובמבר 2025  
**גרסה**: 1.0  
**שימוש הבא**: כל החלטה חשובה במערכת!

---

## מילות סיום

**זכור**: 
- החלטות טובות מתועדות טוב
- תיעוד טוב מונע בלבול
- בלבול גורם לטעויות
- טעויות גורמות לכאב ראש

**לכן**: תעד כל החלטה חשובה. זה מצטבר! 📝✨
